(()=>{"use strict";const e=document.getElementById("manage"),t=document.getElementById("register"),n=document.getElementById("manageForm"),l=document.getElementById("registerForm"),i=document.querySelectorAll(".productDisplay"),d=document.styleSheets[0];let o;(()=>{var n;for(let e of i)(null===(n=e.lastElementChild)||void 0===n?void 0:n.hasAttribute("value"))&&(e.classList.add("registered"),d.insertRule(".registered::marker {color: #04e69b}"));document.querySelectorAll(".registered").length!==i.length?t.checked=!0:e.checked=!0,r()})(),window.Quagga.init({inputStream:{type:"LiveStream",target:document.querySelector("#cameraCanvas"),constraints:{facingMode:"user"}},decoder:{readers:["ean_reader"]}},(e=>{e?console.log(e):(console.log("Initialization finished. Ready to start"),window.Quagga.start())})),window.Quagga.onProcessed((e=>{let t=window.Quagga.canvas.ctx.overlay,n=window.Quagga.canvas.dom.overlay;t.clearRect(0,0,parseInt(n.width),parseInt(n.height)),e&&e.box&&(console.log(JSON.stringify(e.box)),window.Quagga.ImageDebug.drawPath(e.box,{x:0,y:1},t,{color:"blue",lineWidth:2}))}));let a=0;function r(){e.checked?(n&&(n.style.visibility="visible"),l&&(l.style.visibility="hidden")):t.checked&&(l&&(l.style.visibility="visible"),n&&(n.style.visibility="hidden"))}window.Quagga.onDetected((t=>{if(o==t.codeResult.code?a++:(a=0,o=t.codeResult.code),a>=3&&/^45/.test(o)){if(!e.checked)return void(document.getElementById("registerCodeInput").value=o);document.getElementById("verifyCodeInput").value=o,document.getElementById("productName").textContent=function(e){var t,n;for(let l of i)if(l.lastElementChild&&l.lastElementChild.value==e){const e=null===(n=null===(t=l.firstChild)||void 0===t?void 0:t.textContent)||void 0===n?void 0:n.split(":")[0];return null!=e?e:null}return null}(o)}})),null==e||e.addEventListener("change",r),null==t||t.addEventListener("change",r)})();